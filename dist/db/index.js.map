{"version":3,"sources":["../../src/db/index.js"],"names":["require","config","makeDb","MongoClient","mongodb","url","process","env","DATABASE_URL","dbName","client","useUnifiedTopology","keepAlive","connect","e","db","makeId","makeIdFromString","id","ObjectID"],"mappings":";;;;;;;AACA;;;;AADAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAIe,eAAeC,MAAf,GAAyB;AACtC,QAAMC,WAAW,GAAGC,iBAAQD,WAA5B;AACA,QAAME,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,YAAxB;AACA,QAAMC,MAAM,GAAG,eAAf;AAEA,QAAMC,MAAM,GAAG,IAAIP,WAAJ,CAAgBE,GAAhB,EAAqB;AAAEM,IAAAA,kBAAkB,EAAE,IAAtB;AAA4BC,IAAAA,SAAS,EAAE;AAAvC,GAArB,CAAf;;AAGA,MAAI;AACF,UAAMF,MAAM,CAACG,OAAP,EAAN;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU,CACV;AACD;;AAED,QAAMC,EAAE,GAAG,MAAML,MAAM,CAACK,EAAP,CAAUN,MAAV,CAAjB;AACAM,EAAAA,EAAE,CAACC,MAAH,GAAYC,gBAAZ;AACA,SAAOF,EAAP;AAED;;AAED,SAASE,gBAAT,CAA2BC,EAA3B,EAA+B;AAC7B,SAAO,IAAId,iBAAQe,QAAZ,CAAqBD,EAArB,CAAP;AACD","sourcesContent":["require('dotenv').config();\nimport mongodb from 'mongodb';\n\n\nexport default async function makeDb () {\n  const MongoClient = mongodb.MongoClient\n  const url = process.env.DATABASE_URL;\n  const dbName = 'masterislamDB'\n\n  const client = new MongoClient(url, { useUnifiedTopology: true, keepAlive: true,\n    })\n\n  try {\n    await client.connect()\n  } catch (e) {\n    //console.error(e);\n  }\n  \n  const db = await client.db(dbName)\n  db.makeId = makeIdFromString\n  return db\n\n}\n\nfunction makeIdFromString (id) {\n  return new mongodb.ObjectID(id)\n}"],"file":"index.js"}